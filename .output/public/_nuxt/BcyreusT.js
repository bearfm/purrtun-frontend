import{d as r,L as s,q as c,t as i,v as p,y as u,M as l,l as f}from"./BZOgez34.js";import{u as k}from"./zYahbjWO.js";const d={class:"text-black"},_=r({__name:"callback",setup(m){const o=k("accessToken",{sameSite:!0});let n="";const a=f().public.backend;return fetch(a+"/api/auth",{method:"POST",body:JSON.stringify({accessToken:`${s().query.code}`,self:`${String(s().name)}`}),headers:{"Content-Type":"application/json"}}).then(async t=>{const e=await t.json();if(n=e,!e.encryptedToken)throw new Error("no accessToken returned from the API."+e);if(o.value=e.encryptedToken,o.value!==e.encryptedToken)throw new Error("For some reason, your browser failed to properly set the cookie.");c("/")}),(t,e)=>(i(),p("h1",d,u(l(n)),1))}});export{_ as default};
